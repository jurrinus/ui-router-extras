/** UI-Router Extras v.0.0.14 Module: future http://christopherthielen.github.io/ui-router-extras/ - MIT License */
!function(t,e){"use strict";!function(t,e){function r(r,n,o,a){function u(t,r){if(r.url&&r.url.length>0)for(var n=r.url.split(/\./);n.length;){var o=n.join("/"),a=h[o].stateName.split(".");a.splice(a.length-1,1);for(var u=[h[o]];a.length>0;)stateName=a.join("."),l[stateName]===e||t.get(stateName)||u.push(l[stateName]),a.splice(a.length-1,1);return u}else if(r.name&&r.name.length>0){for(var a=r.name.split("."),u=[];a.length>0;)stateName=a.join("."),l[stateName]===e||t.get(stateName)||u.push(l[stateName]),a.splice(a.length-1,1);return u}}function i(t,e){if(!e&&futureState.length>0){var r=$q.defer();return r.reject("No lazyState passed in "+e),r.promise}var n=e[0].type,o=c[n];if(!o)throw Error("No state factory for futureState.type: "+(e&&futureState[0].type));return t.invoke(o,o,{futureStates:e})}function s(t,e){var n=!1,o=t.get("$log"),a=["$state",function(t){o.debug("Unable to map "+e.path()),e.url("/")}],s=["$rootScope","$urlRouter","$state",function(o,s,c){if(m){if(!p)return f().then(function(){n=!0,s.sync(),n=!1}),void(p=!0);var l=u(c,{url:e.path()});if(!l)return t.invoke(a);g=!0,i(t,l).then(function(t){for(var e=0;e<t.length;e++)t[e]&&!c.get(t[e])&&r.state(t[e]);n=!0,s.sync(),n=!1,g=!1},function(){g=!1,c.go("top")})}}];if(!g){var c=n?a:s;return t.invoke(c)}}var f,c={},l={},h={},g=!1,v=[],p=!1,m=!1,$=this;this.addResolve=function(t){v.push(t)},this.stateFactory=function(t,e){c[t]=e},this.futureState=function(t){l[t.stateName]=t;var e=t.urlPrefix,r=t.urlPrefix.indexOf("?"),r=-1===r?t.urlPrefix.indexOf("/:"):r,r=-1===r?t.urlPrefix.indexOf("/{"):r;-1!==r&&(e=t.urlPrefix.substr(0,r)),h[e]=t},this.get=function(){return t.extend({},l)},n.otherwise(s);var d={getResolvePromise:function(){return f()}};this.$get=["$injector","$state","$q","$rootScope","$urlRouter","$timeout","$log",function(e,n,o,a,s,c,l){function h(){if(a.$on("$stateNotFound",function(t,o,a,s){if(!g){l.debug("event, unfoundState, fromState, fromParams",t,o,a,s);var f=u(n,{name:o.to});if(!(!f.length>0)){t.preventDefault(),g=!0;var c=i(e,f);c.then(function(t){for(var e=0;e<t.length;e++)t[e]&&!n.get(t[e])&&r.state(t[e]);n.go(o.to,o.toParams),g=!1},function(t){console.log("failed to lazy load state ",t),n.go(a,s),g=!1})}}}),!f){var h=[];t.forEach(v,function(t){h.push(e.invoke(t))}),f=function(){return o.all(h)}}f().then(function(){c(function(){n.transition?n.transition.then(s.sync,s.sync):s.sync()})}),m=!0}return h(),d.state=r.state,d.futureState=$.futureState,d.get=$.get,d}]}var n=t.module("ct.ui.router.extras.future",["ct.ui.router.extras.core"]);r.$inject=["$stateProvider","$urlRouterProvider","$urlMatcherFactoryProvider","uirextras_coreProvider"],n.provider("$futureState",r);var o={state:function(t){o.$rootScope&&o.$rootScope.$broadcast("$stateAdded",t)},itsNowRuntimeOhWhatAHappyDay:function(t){o.$rootScope=t},$rootScope:e};n.config(["$stateProvider",function(e){var r=e.state;e.state=function(){var n=r.apply(e,arguments),a=t.isObject(arguments[0])?arguments[0]:arguments[1];return o.state(a),n}}]),n.run(["$futureState",function(t,e){o.itsNowRuntimeOhWhatAHappyDay(e)}])}(t)}(angular);