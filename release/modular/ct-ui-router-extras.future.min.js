/** UI-Router Extras v.1.0.3 Module: future http://github.com/jurrinus/ui-router-extras/ - MIT License */
!function(t,e){"use strict";!function(t,e){function r(r,n,o,u){function a(t,r){if(r.url&&r.url.length>0)for(var n=r.url.split(/\./),o="";n.length;){var u=n.join("/"),a=h[u].stateName.split(".");a.splice(a.length-1,1);for(var i=[h[u]];a.length>0;)o=a.join("."),l[o]===e||t.get(o)||i.push(l[o]),a.splice(a.length-1,1);return i}else if(r.name&&r.name.length>0){for(var a=r.name.split("."),i=[];a.length>0;)o=a.join("."),l[o]===e||t.get(o)||i.push(l[o]),a.splice(a.length-1,1);return i}}function i(t,e){if(!e&&futureState.length>0){var r=$q.defer();return r.reject("No lazyState passed in "+e),r.promise}var n=e[0].type,o=c[n];if(!o)throw Error("No state factory for futureState.type: "+(e&&futureState[0].type));return t.invoke(o,o,{futureStates:e})}function f(t,e){var n=!1,o=t.get("$log"),u=["$state",function(t){o.debug("Unable to map "+e.path()),e.url("/")}],f=["$rootScope","$urlRouter","$state",function(o,f,c){if($){if(!p)return s().then(function(){n=!0,f.sync(),n=!1}),void(p=!0);var l=a(c,{url:e.path()});if(!l)return t.invoke(u);g=!0,i(t,l).then(function(t){for(var e=0;e<t.length;e++)t[e]&&!c.get(t[e])&&r.state(t[e]);n=!0,f.sync(),n=!1,g=!1},function(){g=!1,c.go("top")})}}];if(!g){var c=n?u:f;return t.invoke(c)}}var s,c={},l={},h={},g=!1,v=[],p=!1,$=!1,d=this;this.addResolve=function(t){v.push(t)},this.stateFactory=function(t,e){c[t]=e},this.futureState=function(t){l[t.stateName]=t;var e=t.urlPrefix,r=t.urlPrefix.indexOf("?"),r=-1===r?t.urlPrefix.indexOf("/:"):r,r=-1===r?t.urlPrefix.indexOf("/{"):r;-1!==r&&(e=t.urlPrefix.substr(0,r)),h[e]=t},this.get=function(){return t.extend({},l)},n.otherwise(f);var m={getResolvePromise:function(){return s()}};this.$get=["$injector","$state","$q","$rootScope","$urlRouter","$timeout","$log",function(e,n,o,u,f,c,l){function h(){if(u.$on("$stateNotFound",function(t,o,u,f){if(!g){l.debug("event, unfoundState, fromState, fromParams",t,o,u,f);var s=a(n,{name:o.to});if(!(!s.length>0)){t.preventDefault(),g=!0;var c=i(e,s);c.then(function(t){for(var e=0;e<t.length;e++)t[e]&&!n.get(t[e])&&r.state(t[e]);n.go(o.to,o.toParams),g=!1},function(t){console.log("failed to lazy load state ",t),n.go(u,f),g=!1})}}}),!s){var h=[];t.forEach(v,function(t){h.push(e.invoke(t))}),s=function(){return o.all(h)}}s().then(function(){c(function(){n.transition?n.transition.then(f.sync,f.sync):f.sync()})}),$=!0}return h(),m.state=r.state,m.futureState=d.futureState,m.get=d.get,m}]}var n=t.module("ct.ui.router.extras.future",["ct.ui.router.extras.core"]);r.$inject=["$stateProvider","$urlRouterProvider","$urlMatcherFactoryProvider","uirextras_coreProvider"],n.provider("$futureState",r);var o={state:function(t){o.$rootScope&&o.$rootScope.$broadcast("$stateAdded",t)},itsNowRuntimeOhWhatAHappyDay:function(t){o.$rootScope=t},$rootScope:e};n.config(["$stateProvider",function(e){var r=e.state;e.state=function(){var n=r.apply(e,arguments),u=t.isObject(arguments[0])?arguments[0]:arguments[1];return o.state(u),n}}]),n.run(["$rootScope",function(t){o.itsNowRuntimeOhWhatAHappyDay(t)}])}(t)}(angular);